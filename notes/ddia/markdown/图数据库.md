## 图数据库

### Cypher查询语言
docker本地启动neo4j
```sh
docker run -d --name neo4j -p 7474:7474 -p 7687:7687 neo4j

http://localhost:7474/
```
示例
```cypher
CREATE
  (NAmerica:Location {name:'North America', type:'continent'}),
  (USA:Location      {name:'United States', type:'country'  }),
  (Idaho:Location    {name:'Idaho',         type:'state'    }),
  (Europe:Location {name:'Europe', type:'continent'}),
  (England:Location    {name:'England',         type:'country'    }),
  (London:Location    {name:'London',         type:'city'    }),
  (Lucy:Person       {name:'Lucy' }),
  (Idaho) -[:WITHIN]->  (USA)  -[:WITHIN]-> (NAmerica),
  (London) -[:WITHIN]-> (England) -[:WITHIN]-> (Europe),
  (Lucy)  -[:BORN_IN]-> (Idaho),
  (Lucy) -[:LIVES_IN]-> (London)

// 查找所有从美国移民到英国的人员名单                      
MATCH
  (person) -[:BORN_IN]->  () -[:WITHIN*0..]-> (us:Location {name:'United States'}),
  (person) -[:LIVES_IN]-> () -[:WITHIN*0..]-> (eu:Location {name:'Europe'})
RETURN person.name

// 顺便查出出生城市
MATCH
  (person) -[:BORN_IN]-> (birthCity:Location) -[:WITHIN*0..]-> (us:Location {name:'United States'}),
  (person) -[:LIVES_IN]-> () -[:WITHIN*0..]-> (eu:Location {name:'Europe'})
RETURN person.name, birthCity.name

// 顺带查出当前居住的城市！
MATCH
  (person) -[:BORN_IN]-> (birthCity:Location) -[:WITHIN*0..]-> (us:Location {name:'United States'}),
  (person) -[:LIVES_IN]-> (liveCity:Location) -[:WITHIN*0..]-> (eu:Location {name:'Europe'}),
  (liveCity) -[:WITHIN*0..]-> (liveCity:Location {type: 'city'})
RETURN person.name, birthCity.name, liveCity.name

// 清空所有数据
MATCH (n)
DETACH DELETE n


// 删除节点：
MATCH (n) WHERE id(n) = 4
DELETE n
// 同时删除节点和与其相关联的边
MATCH (n) WHERE id(n) = 10
DETACH DELETE n
       
// https://neo4j.com/docs/cypher-manual/current/clauses/delete/
MATCH (n:Person {name: 'Lucy'})-[r:BORN_IN]->()
DELETE r

MATCH (Lucy) - [:BORN_IN]-> (Europe)
DETACH DELETE n                                               
                                                            
```